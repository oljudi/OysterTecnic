{"ast":null,"code":"var _jsxFileName = \"/Users/oljudi/Documents/prsnl/OysterTecnic/frontend/src/context.js\";\nimport React, { Component, createContext } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport AUTH_SERVICE from \"./services/auth\";\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formSignUp: {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        accountType: \"\"\n      },\n      formLogin: {\n        email: \"\",\n        password: \"\"\n      },\n      user: null,\n      isLogged: false\n    };\n\n    this.handleLoginInput = e => {\n      const {\n        formLogin\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formLogin[name] = value;\n      this.setState({\n        formLogin\n      });\n    };\n\n    this.handleLoginSubmit = e => {\n      e.preventDefault();\n      const form = this.state.formLogin;\n      return AUTH_SERVICE.login(form).then(({\n        data: {\n          user\n        }\n      }) => {\n        this.setState({\n          user,\n          isLogged: true\n        });\n        return {\n          user,\n          msg: \"Bienvenido a tu cuenta Oyster!!\"\n        };\n      }).catch(err => {\n        this.setState({\n          user: null,\n          isLogged: false,\n          formLogin: {\n            email: \"\",\n            password: \"\"\n          }\n        });\n        return {\n          user: null,\n          msg: \"Usuario o contraseña incorrectos!!\"\n        };\n      }).finally(() => this.setState({\n        formLogin: {\n          email: \"\",\n          password: \"\"\n        }\n      }));\n    };\n\n    this.handleSignupInput = e => {\n      const {\n        formSignUp\n      } = this.state;\n      const {\n        name,\n        value\n      } = e.target;\n      formSignUp[name] = value;\n      this.setState({\n        formSignUp\n      });\n    };\n\n    this.handleSignupRadio = e => {\n      const {\n        formSignUp\n      } = this.state;\n      const {\n        value\n      } = e.target;\n      formSignUp[\"accountType\"] = value;\n      this.setState({\n        formSignUp\n      });\n    };\n\n    this.handleSignupSubmit = async e => {\n      e.preventDefault();\n      const form = this.state.formSignUp;\n      this.setState({\n        formSignUp: {\n          name: '',\n          email: '',\n          password: '',\n          accountType: ''\n        }\n      });\n      return await AUTH_SERVICE.signup(form);\n    };\n\n    this.handleLogout = async () => {\n      await AUTH_SERVICE.logOut();\n      this.props.history.push('/');\n      this.setState({\n        isLogged: false,\n        user: null\n      });\n    };\n  }\n\n  render() {\n    const {\n      state,\n      handleLoginInput,\n      handleLoginSubmit,\n      handleSignupInput,\n      handleSignupRadio,\n      handleSignupSubmit\n    } = this;\n    return /*#__PURE__*/React.createElement(MyContext.Provider, {\n      value: {\n        state,\n        handleLoginInput,\n        handleLoginSubmit,\n        handleSignupInput,\n        handleSignupRadio,\n        handleSignupSubmit\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, this.props.children);\n  }\n\n}\n\nexport default withRouter(MyProvider);","map":{"version":3,"sources":["/Users/oljudi/Documents/prsnl/OysterTecnic/frontend/src/context.js"],"names":["React","Component","createContext","withRouter","AUTH_SERVICE","MyContext","MyProvider","state","formSignUp","name","email","password","accountType","formLogin","user","isLogged","handleLoginInput","e","value","target","setState","handleLoginSubmit","preventDefault","form","login","then","data","msg","catch","err","finally","handleSignupInput","handleSignupRadio","handleSignupSubmit","signup","handleLogout","logOut","props","history","push","render","children"],"mappings":"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","sourcesContent":["import React, { Component, createContext } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport AUTH_SERVICE from \"./services/auth\";\n\nexport const MyContext= createContext()\n\nclass MyProvider extends Component {\n    state = {\n        formSignUp: {\n            name: \"\",\n            email: \"\",\n            password: \"\",\n            accountType: \"\"\n        },\n        formLogin: {\n            email: \"\",\n            password: \"\"\n        },\n        user: null,\n        isLogged: false\n    }\n\n    handleLoginInput = e => {\n        const { formLogin } = this.state\n        const { name, value } = e.target\n        formLogin[name] = value\n        this.setState({ formLogin })\n    }\n\n    handleLoginSubmit = e => {\n        e.preventDefault()\n        const form = this.state.formLogin\n        return AUTH_SERVICE.login(form)\n            .then(({data: { user }}) => {\n                this.setState({\n                    user,\n                    isLogged: true\n                })\n                return {user, msg: \"Bienvenido a tu cuenta Oyster!!\"}\n            })\n            .catch(err => {\n                this.setState({\n                    user: null,\n                    isLogged: false,\n                    formLogin: {\n                        email: \"\",\n                        password: \"\"\n                    }\n                })\n                return { user: null, msg: \"Usuario o contraseña incorrectos!!\"}\n            })\n            .finally(() => this.setState({ formLogin: {email: \"\", password: \"\"}}))\n    }\n\n    handleSignupInput = e => {\n        const { formSignUp } = this.state\n        const { name, value } = e.target\n        formSignUp[name] = value\n        this.setState({ formSignUp })\n    }\n\n    handleSignupRadio = e => {\n        const { formSignUp } = this.state\n        const { value } = e.target\n        formSignUp[\"accountType\"] = value\n        this.setState({ formSignUp })\n    }\n\n    handleSignupSubmit = async e => {\n        e.preventDefault()\n        const form = this.state.formSignUp\n        this.setState({\n            formSignUp: {name: '', email: '', password: '', accountType: ''}\n        })\n        return await AUTH_SERVICE.signup(form)\n    }\n\n    handleLogout = async () => {\n        await AUTH_SERVICE.logOut()\n        this.props.history.push('/')\n        this.setState({ isLogged: false, user: null })\n    } \n\n    render() {\n        const {\n            state,\n            handleLoginInput,\n            handleLoginSubmit,\n            handleSignupInput,\n            handleSignupRadio,\n            handleSignupSubmit\n        } = this\n        return (\n            <MyContext.Provider\n                value = {{\n                    state,\n                    handleLoginInput,\n                    handleLoginSubmit,\n                    handleSignupInput,\n                    handleSignupRadio,\n                    handleSignupSubmit\n                }}\n            >\n                {this.props.children}\n            </MyContext.Provider>\n        )\n    }\n}\n\nexport default withRouter(MyProvider);"]},"metadata":{},"sourceType":"module"}